<!DOCTYPE html>
    <html lang="en">
        <head>
            <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>Chat Widget Initialization</title>
                </head>
                <body>
                    <script type='text/javascript' src='https://service.force.com/embeddedservice/5.0/esw.min.js'></script>
                    <script>
                        if (!window.embedded_svc) {
                         var s = document.createElement('script');
                        s.setAttribute('src',  'farmers--efnolsit2.sandbox.my.salesforce-sites.com/embeddedservice/5.0/esw.min.js');
                        s.onload = function() {
                            initESW(null);
                        };
                        document.body.appendChild(s);
                        } else {
                        var dateNum = new Date().getTime();
                        var liveAgentURL = 'farmers--efnolsit2.sandbox.my.salesforce-sites.com/LiveAgent';
                        console.log('liveAgentURL '+ liveAgentURL);
                        var cssResourceUrl = liveAgentURL + '/resource/EmbeddedChat/css/Farmers_EmbeddedChat_Style.css'+ '?cacheparam=' + dateNum;

                        console.log(' cssResourceUrl : '+cssResourceUrl );
                        var stylecss = document.createElement('link');
                        stylecss.setAttribute('rel',"stylesheet");
                        stylecss.setAttribute('href',cssResourceUrl);
                        document.body.appendChild(stylecss);

                        var jsResourceUrl =  liveAgentURL + '/resource/EmbeddedChat/scripts/Farmers_EmbeddedChat_Init.js'+ '?cacheparam=' + dateNum;
                        console.log(' jsResourceUrl : '+jsResourceUrl );
                        var s = document.createElement('script');
                        s.setAttribute('src', jsResourceUrl);

                        s.onload = function() {
                            initESW('https://service.force.com');
                        };
                        document.body.appendChild(s);

                        let fontResourceUrl1 = liveAgentURL + '/resource/EmbeddedChat/fontFiles/farmers-web-fonts/OpenSans-Bold.ttf' + '?cacheparam=' + dateNum;

                        console.log('fontResourceUrl1 : ' + fontResourceUrl1);
                        var stylecss1 = document.createElement('link');
                        stylecss1.setAttribute('rel', "preload");
                        stylecss1.setAttribute('href', fontResourceUrl1);
                        stylecss1.setAttribute('as', "font");
                        stylecss1.setAttribute('type', "font/ttf");
                        stylecss1.setAttribute('crossorigin', "anonymous");
                        document.body.appendChild(stylecss1);
                         
                        let fontResourceUrl2 = liveAgentURL + '/resource/EmbeddedChat/fontFiles/farmers-web-fonts/OpenSans-SemiBold.ttf'+ '?cacheparam=' + dateNum;
                         
                        console.log('fontResourceUrl2 : ' + fontResourceUrl2);
                        let fontStyle1 = document.createElement('link');
                        fontStyle1.setAttribute('rel', "preload");
                        fontStyle1.setAttribute('href', fontResourceUrl2);
                        fontStyle1.setAttribute('as', "font");
                        fontStyle1.setAttribute('type', "font/ttf");
                        fontStyle1.setAttribute('crossorigin', "anonymous");
                        document.body.appendChild(fontStyle1);
                         
                        let fontResourceUrl3 = liveAgentURL + '/resource/EmbeddedChat/fontFiles/farmers-web-fonts/OpenSans-Regular.ttf'+'?cacheparam=' + dateNum;
                         
                        console.log('fontResourceUrl3 : ' + fontResourceUrl3);
                        let fontStyle2 = document.createElement('link');
                        fontStyle2.setAttribute('rel', "preload");
                        fontStyle2.setAttribute('href', fontResourceUrl3);
                        fontStyle2.setAttribute('as', "font");
                        fontStyle2.setAttribute('type', "font/ttf");
                        fontStyle2.setAttribute('crossorigin', "anonymous");
                        document.body.appendChild(fontStyle2);    
                    
                        let loadFontStyle  = liveAgentURL + '/resource/EmbeddedChat/fontFiles/farmers-web-fonts/style.css'+ '?cacheparam=' + dateNum;
                        console.log(' Load font style : '+loadFontStyle );
                        let stylecss2 = document.createElement('link');
                        stylecss2.setAttribute('rel',"stylesheet");
                        stylecss2.setAttribute('href',loadFontStyle);
                        document.body.appendChild(stylecss2);    
                      }
                    </script>
                </body>
            </html>
